# TinyPT
This is a simple Montecarlo photon transport code, developed for the research of the radiation imaging systems, such as CT, PET, Compton camera or more.
It supports generation of the attenuation coefficient and the scattering form factor by a chemical composition definition to determine interaction between photons and phantom material.
Chemical composition data and phantoms are defined by JSON format.
Code structure is as follows.
![Alt Text](https://github.com/tomosu/TinyPT/raw/master/Image/TinyPT.gif)

## To do
* Add tests and documents.
* Add more material definition files.
* Add vacuum model.
* Change flourescent code.
* Add deposit energy counter.
* Error handling in compound generator.
* Add voxel-based phantom.
* Add PET simulation example.
* Add more shape models.
* Add other generator types.
* Parallelization.

## Example1: Cone beam CT simulation
![Alt Text](https://github.com/tomosu/TinyPT/raw/master/Image/attenuationImage.gif)
3D sinogram generated by [this example](https://github.com/tomosu/TinyPT/tree/master/Examples/ConeBeamCTAttenImage).

## Example2: Photon scattering angle calculation
[CsI scattering angle sampling example](https://github.com/tomosu/TinyPT/tree/master/Examples/ScatteringAngleDistribution).
```
Compound Name: CsI
Density: 4.510000e+00

Elements Info
1:
ElementName: Cesium(Z=55)
AtomicWeight: 1.329050e+02
K_alpha(MeV): 3.097708e-02
Quantity: 1

2:
ElementName: Iodine(Z=53)
AtomicWeight: 1.269044e+02
K_alpha(MeV): 2.861597e-02
Quantity: 1

Calc Rayleigh scattering angle distribution @0.04MeV

probability
7.51e-02 #   *
         #  * *
         #     *
         #
         #      *
         # *     *
         #        *
         #         *
4.17e-02 #          *
         #           *
         #            *
         #             *
         #              *
         #*              **
         #                 *
         #                  **
         #                    ****
4.17e-03 #*                       ************************ *
         ###################################################
         0.00e+00                 8.82e+01                 1.76e+02
                                                          degree

Calc Compton scattering angle distribution @0.04MeV

probability
2.75e-02 #                                  *
         #               ********    ******* ***
         #             **        ****           **
         #           **                           *
         #                                         *
         #          *                               *
         #         *
         #        *                                  *
1.53e-02 #                                            *
         #       *
         #                                             *
         #      *
         #     *                                        *
         #
         #    *                                          *
         #   *
         #                                                 *
1.53e-03 #***
         ###################################################
         0.00e+00                 8.82e+01                 1.76e+02
                                                          degree
```

## References
Physical reference data is by [NIST](http://www.nist.gov/pml/data/).
Formatted data is by [KEK(\EGS\)](http://rcwww.kek.jp/research/egs/egs5.html) and [Kato Hideki](http://www.fujita-hu.ac.jp/~hid-kato/).
JSON library by [kazuho\(picojson\)](https://github.com/kazuho).